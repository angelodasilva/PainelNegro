html_text()
fora_casa <- resultados %>%
html_nodes(".pull-right .time-sigla") %>%
html_text()
rodada <- 0:(length(placar)-1) %/% 10 + 1
df <- data.frame(rodada = rodada,
casa = casa,
placar = placar,
fora_casa = fora_casa,
stringsAsFactors = FALSE) #%>%
library(rvest) # pacote para web scraping
library(tidyverse)
dado_cbf <- read_html("https://www.cbf.com.br")
dado_cbf
dado_cbf <- dado_cbf %>%
html_nodes(".swiper-slide")
library(rvest) # pacote para web scraping
library(tidyverse)
dado_cbf <- read_html("https://www.cbf.com.br")
dado_cbf
dado_cbf <- dado_cbf %>%
html_nodes(".swiper-slide")
print(dado_cbf)
rodada <- dado_cbf %>%
html_nodes(".aside-header .text-center") %>%
html_text()
print(rodada)
resultados <- dado_cbf %>%
html_nodes(".aside-content .clearfix")
print(resultados)
casa <- resultados %>%
html_nodes(".pull-left .time-sigla") %>%
html_text()
print(casa)
fora_casa <- resultados %>%
html_nodes(".pull-right .time-sigla") %>%
html_text()
placar <- resultados %>%
html_nodes(".partida-horario") %>%
html_text() %>%
str_extract("[0-9]{1}\ x\ [0-9]{1}")
print(placar)
rodada <- 0:(length(placar)-1) %/% 10 + 1
df <- data.frame(rodada = rodada,
casa = casa,
placar = placar,
fora_casa = fora_casa,
stringsAsFactors = FALSE)
View(df)
library(shiny); runApp('Estudos/Cursos_feitos/Shiny/PAINEL3.R')
runApp('Estudos/Cursos_feitos/Shiny/PAINEL3.R')
runApp('Estudos/Cursos_feitos/Shiny/PAINEL3.R')
runApp('Estudos/Cursos_feitos/Shiny/PAINEL3.R')
runApp('Estudos/Cursos_feitos/Shiny/PAINEL3.R')
runApp('Estudos/Cursos_feitos/Shiny/PainelNegro/PAINEL3.R')
runApp('Estudos/Cursos_feitos/Shiny/PainelNegro/PAINEL3.R')
runApp('Estudos/Cursos_feitos/Shiny/PainelNegro/PAINEL3.R')
runApp('Estudos/Cursos_feitos/Shiny/PainelNegro/PAINEL3.R')
runApp('Estudos/Cursos_feitos/Shiny/PainelNegro/PAINEL3.R')
runApp('Estudos/Cursos_feitos/Shiny/PainelNegro/PAINEL3.R')
install.packages("rsconnect")
install.packages("rsconnect")
library(shiny); runApp('Estudos/Cursos_feitos/Shiny/PainelNegro/PAINEL3.R')
runApp('Estudos/Cursos_feitos/Shiny/PainelNegro/PAINEL3.R')
runApp('Estudos/Cursos_feitos/Shiny/PainelNegro/PAINEL3.R')
runApp('Estudos/Cursos_feitos/Shiny/PainelNegro/PAINEL3.R')
runApp('Estudos/Cursos_feitos/Shiny/PainelNegro/PAINEL3.R')
runApp('Estudos/Cursos_feitos/Shiny/PainelNegro/PAINEL3.R')
runApp('Estudos/Cursos_feitos/Shiny/PainelNegro/PAINEL3.R')
runApp('Estudos/Cursos_feitos/Shiny/PainelNegro/PAINEL3.R')
runApp('Estudos/Cursos_feitos/Shiny/PainelNegro/PAINEL3.R')
setwd("~/Estudos/Cursos_feitos/Shiny/PainelNegro")
#install.packages("tidyr")
#install.packages("sf")
library(shiny)
library(ggplot2)
library(tidyr)
library(bslib)
library(sf)
options(scipen = 999)  # desativando notacao cientifica
dados <- readRDS("dadosPNAD.RDS")
#dados$ano <- paste0("20",dados$ano)
dados$ano <- factor(dados$ano, order=T)
dados$V2007 <- ifelse(dados$V2007 == "Masculino", "Homem", dados$V2007)
dados$V2007 <- ifelse(dados$V2007 == 2 | dados$V2007 == 4, "Mulher", dados$V2007)
dados$V2007 <- ifelse(dados$V2007 == 3, "Homem", dados$V2007)
dados$VD3005 <- substr(dados$VD3005, 1, 2)
dados$VD3005 <- ifelse(dados$VD3005 == "Se", 0, dados$VD3005)
dados$VD3005 <- as.numeric(dados$VD3005)
dados$VD3004 <- ifelse(dados$VD3004 == "Sem instrução e menos de 1 ano de estudo" |
dados$VD3004 == "Fundamental incompleto ou equivalente", "1-Sem fundamental",
ifelse(dados$VD3004 == "Fundamental completo ou equivalente" |
dados$VD3004 == "Médio incompleto ou equivalente", "2-Fundamental completo",
ifelse(dados$VD3004 == "Médio completo ou equivalente" |
dados$VD3004 == "Superior incompleto ou equivalente", "3-Médio completo",
ifelse(dados$VD3004 == "Superior completo","4-Superior completo",dados$VD3004)
)
)
)
dados$VD3004 <- factor(dados$VD3004, order=T, levels = c("1-Sem fundamental",
"2-Fundamental completo", "3-Médio completo", "4-Superior completo"))
br <- st_read("brasil.shp")
br$estado <- c("11","12","13","14","15","16","17","21","22","23","24","25","26","27","28","29",
"31","32","33","35","41","42","43","50","51","52","53")
br$ID <- NULL
corpreta <- "black"
corparda <- "brown4"
corbranca <- "gray41"
coramarela <- "yellow4"
corindia <- "green4"
dadospartic <- dados[dados$VD4001 == "Pessoas fora da força de trabalho",]
dadosPIA <- dados[dados$VD4001 == "Pessoas na força de trabalho" | dados$VD4001 == "Pessoas fora da força de trabalho",]
table(dados)
table(dados$VD4001)
str(dados)
summary(dados)
dadospartic <- dados[dados$VD4001 == "Pessoas fora da força de trabalho",]
dadosPIA <- dados[dados$VD4001 == "Pessoas na força de trabalho" | dados$VD4001 == "Pessoas fora da força de trabalho",]
table(dados$VD4001)
sum(table(dados$VD4001))
is.na(dados$VD4001)
sum(is.na(dados$VD4001))
table(dados$VD4001)
176289+137542+67097
dadospartic <- dados[dados$VD4001 == "Pessoas fora da força de trabalho",]
dadospartic <- dados[dados$VD4001 == 1,]
dadospartic <- dados[dados$VD4001 == 2,]
dados <- readRDS("dadosPNAD.RDS")
dadospartic <- dados[dados$VD4001 == "Pessoas fora da força de trabalho",]
dadosPIA <- dados[dados$VD4001 == "Pessoas na força de trabalho" | dados$VD4001 == "Pessoas fora da força de trabalho",]
dadosPIA <- dados[dados$VD4001 == "Pessoas na força de trabalho",]
dadospartic <- dados[dados$VD4001 == "Pessoas fora da força de trabalho",]
dadosPIA <- dados[dados$VD4001 == "Pessoas na força de trabalho" & dados$VD4001 == "Pessoas fora da força de trabalho",]
table(dados$VD4001)
table(dados$VD4001, useNA = T)
table(dados$VD4001, useNA = NULL)
table(dados$VD4001, useNA = F)
table(dados$VD4001, useNA = T)
table(dados$VD4001, useNA = TRUE)
table(dados$VD4001, useNA = FALSE)
table(dados$VD4001, useNA = NULL)
class(dados)
sum(is.na(dados$VD4001))
summary(dados$VD4001)
class(dados$VD4001)
dadospartic <- dados[dados$VD4001 == "Pessoas fora da força de trabalho",]
dadosdesemp <- dados[dados$VD4002 == "Pessoas desocupadas",]
dadosFT <- dados[dados$VD4002 == "Pessoas ocupadas" | dados$VD4002 == "Pessoas desocupadas",]
dados <- readRDS("dadosPNAD.RDS")
summary(dados$VD4001)
FT <- dados[dados$VD4001=="Pessoas na força de trabalho",]
View(FT)
FT <- dados[dados$VD4001=="Pessoas na força de trabalho" & !is.na(dados$VD4001),]
summary(dados$VD3005)
summary(dados$VD4001)
FT <- dados[dados$VD4001=="Pessoas na força de trabalho" & !is.na(dados$VD4001),]
FT <- dados[dados$VD4001=="Pessoas fora da força de trabalho" & !is.na(dados$VD4001),]
dadospartic <- dados[dados$VD4001 == "Pessoas fora da força de trabalho" & !is.na(dados$VD4001),]
dadosPIA <- dados[!is.na(dados$VD4001),]
rm(FT)
runApp('PAINEL3.R')
#install.packages("tidyr")
#install.packages("sf")
library(shiny)
library(ggplot2)
library(tidyr)
library(bslib)
library(sf)
options(scipen = 999)  # desativando notacao cientifica
dados <- readRDS("dadosPNAD.RDS")
#dados$ano <- paste0("20",dados$ano)
dados$ano <- factor(dados$ano, order=T)
dados$V2007 <- ifelse(dados$V2007 == "Masculino", "Homem", dados$V2007)
dados$V2007 <- ifelse(dados$V2007 == 2 | dados$V2007 == 4, "Mulher", dados$V2007)
dados$V2007 <- ifelse(dados$V2007 == 3, "Homem", dados$V2007)
dados$VD3005 <- substr(dados$VD3005, 1, 2)
dados$VD3005 <- ifelse(dados$VD3005 == "Se", 0, dados$VD3005)
dados$VD3005 <- as.numeric(dados$VD3005)
dados$VD3004 <- ifelse(dados$VD3004 == "Sem instrução e menos de 1 ano de estudo" |
dados$VD3004 == "Fundamental incompleto ou equivalente", "1-Sem fundamental",
ifelse(dados$VD3004 == "Fundamental completo ou equivalente" |
dados$VD3004 == "Médio incompleto ou equivalente", "2-Fundamental completo",
ifelse(dados$VD3004 == "Médio completo ou equivalente" |
dados$VD3004 == "Superior incompleto ou equivalente", "3-Médio completo",
ifelse(dados$VD3004 == "Superior completo","4-Superior completo",dados$VD3004)
)
)
)
dados$VD3004 <- factor(dados$VD3004, order=T, levels = c("1-Sem fundamental",
"2-Fundamental completo", "3-Médio completo", "4-Superior completo"))
br <- st_read("brasil.shp")
br$estado <- c("11","12","13","14","15","16","17","21","22","23","24","25","26","27","28","29",
"31","32","33","35","41","42","43","50","51","52","53")
br$ID <- NULL
corpreta <- "black"
corparda <- "brown4"
corbranca <- "gray41"
coramarela <- "yellow4"
corindia <- "green4"
dadospartic <- dados[dados$VD4001 == "Pessoas fora da força de trabalho" & !is.na(dados$VD4001),]
dadospartic <- tapply(dadospartic$one * dadospartic$V1032,list(dadospartic$V2010,dadospartic$V2007),sum)
dadospartic <- as.data.frame(dadospartic)
dadosPIA <- dados[!is.na(dados$VD4001),]
dadosPIA <- tapply(dadosPIA$one * dadosPIA$V1032,list(dadosPIA$V2010,dadosPIA$V2007),sum)
dadosPIA <- as.data.frame(dadosPIA)
print(paste0(round(dadospartic[1,input$radio_partic],0)," homens e ",
round(dadospartic[2,input$radio_partic],0)," mulheres"))
print(paste0(round(dadospartic[1,"Preta"],0)," homens e ",
round(dadospartic[2,"Preta"],0)," mulheres"))
dadospartic[1,"Preta"]
View(dadospartic)
dadospartic <- dados[dados$VD4001 == "Pessoas fora da força de trabalho" & !is.na(dados$VD4001),]
dadospartic <- tapply(dadospartic$one * dadospartic$V1032,list(dadospartic$V2010,dadospartic$V2007),sum)
dadospartic <- as.data.frame(t(dadospartic))
dadosPIA <- dados[!is.na(dados$VD4001),]
dadosPIA <- tapply(dadosPIA$one * dadosPIA$V1032,list(dadosPIA$V2010,dadosPIA$V2007),sum)
dadosPIA <- as.data.frame(t(dadosPIA))
print(paste0(round(dadospartic[1,"Preta"],0)," homens e ",
round(dadospartic[2,"Preta"],0)," mulheres"))
runApp('PAINEL3.R')
library(shiny); runApp('PAINEL3.R')
runApp('PAINEL3.R')
runApp('PAINEL3.R')
runApp('PAINEL3.R')
#install.packages("tidyr")
#install.packages("sf")
library(shiny)
library(ggplot2)
library(tidyr)
library(bslib)
library(sf)
options(scipen = 999)  # desativando notacao cientifica
dados <- readRDS("dadosPNAD.RDS")
#dados$ano <- paste0("20",dados$ano)
dados$ano <- factor(dados$ano, order=T)
dados$V2007 <- ifelse(dados$V2007 == "Masculino", "Homem", dados$V2007)
dados$V2007 <- ifelse(dados$V2007 == 2 | dados$V2007 == 4, "Mulher", dados$V2007)
dados$V2007 <- ifelse(dados$V2007 == 3, "Homem", dados$V2007)
dados$VD3005 <- substr(dados$VD3005, 1, 2)
dados$VD3005 <- ifelse(dados$VD3005 == "Se", 0, dados$VD3005)
dados$VD3005 <- as.numeric(dados$VD3005)
dados$VD3004 <- ifelse(dados$VD3004 == "Sem instrução e menos de 1 ano de estudo" |
dados$VD3004 == "Fundamental incompleto ou equivalente", "1-Sem fundamental",
ifelse(dados$VD3004 == "Fundamental completo ou equivalente" |
dados$VD3004 == "Médio incompleto ou equivalente", "2-Fundamental completo",
ifelse(dados$VD3004 == "Médio completo ou equivalente" |
dados$VD3004 == "Superior incompleto ou equivalente", "3-Médio completo",
ifelse(dados$VD3004 == "Superior completo","4-Superior completo",dados$VD3004)
)
)
)
dados$VD3004 <- factor(dados$VD3004, order=T, levels = c("1-Sem fundamental",
"2-Fundamental completo", "3-Médio completo", "4-Superior completo"))
br <- st_read("brasil.shp")
br$estado <- c("11","12","13","14","15","16","17","21","22","23","24","25","26","27","28","29",
"31","32","33","35","41","42","43","50","51","52","53")
br$ID <- NULL
corpreta <- "black"
corparda <- "brown4"
corbranca <- "gray41"
coramarela <- "yellow4"
corindia <- "green4"
ui <- navbarPage(
theme = bs_theme(version = 4,
bootswatch = "flatly",
primary = "#006400",
secondary = "#000080",
success = "#dadeba"),
title = h1(em("Painel"), strong("NEGRO")),
tabPanel(
title = "Principal",
fluidPage(
h3("População em 2022"),
hr(),
sidebarLayout(
sidebarPanel(
radioButtons("radio_raca", label = h5("Raça"),
choices = list("Preta" = "Preta", "Parda" = "Parda",
"Branca" = "Branca", "Amarela" = "Amarela",
"Indígena" = "Indígena"),
selected = "Preta")
),
mainPanel(
h3(strong("população", textOutput(outputId = "raca")), align = "center"),
h5(textOutput(outputId = "estat_raca"), align = "center"),
h5(textOutput(outputId = "estat_raca1"), align = "center"),
hr(),
plotOutput(outputId = "raca_map"),
hr(),
tableOutput(outputId = "raca_tabela")
)
)
)
),
navbarMenu(
title = "Escolaridade",
tabPanel(
title="Analfabetismo",
fluidPage(
h3("Analfabetismo em 2022"),
hr(),
h5(strong("Analfabetos")," são definidos pelas pessoas com 15 anos ou mais de idade que não sabem ler ou escrever."),
hr(),
sidebarLayout(
sidebarPanel(
radioButtons("radio_analf", label = h5("Raça"),
choices = list("Preta" = "Preta", "Parda" = "Parda",
"Branca" = "Branca", "Amarela" = "Amarela",
"Indígena" = "Indígena"),
selected = "Preta"),
checkboxGroupInput("checkGroup_analf", label = h5("Sexo"),
choices = list("Homem" = "Homem", "Mulher" = "Mulher"),
selected = c("Homem","Mulher"))
),
mainPanel(
h3(strong("população analfabeta", textOutput(outputId = "analf")), align = "center"),
h5(textOutput(outputId = "estat_analf"), align = "center"),
h5(textOutput(outputId = "estat_analf1"), align = "center"),
hr(),
textOutput(outputId = "aviso_analf_map"),
plotOutput(outputId = "analf_map"),
tableOutput(outputId = "analf_tabela")
)
)
)
),
tabPanel(
title="Nível de Instrução",
fluidPage(
h3("Nível de Instrução em 2022"),
hr(),
sidebarLayout(
sidebarPanel(checkboxGroupInput("checkGroup_instrucao", label = h5("Sexo"),
choices = list("Homem" = "Homem", "Mulher" = "Mulher"),
selected = c("Homem","Mulher"))
),
mainPanel(
textOutput(outputId = "aviso_instrucao"),
plotOutput(outputId = "instrucao")
)
)
)
),
tabPanel(
title="Anos de Estudo",
fluidPage(
h3("Anos de estudo em 2022"),
hr(),
sidebarLayout(
sidebarPanel(
radioButtons("radio_estudo", label = h5("Raça"),
choices = list("Preta" = "Preta", "Parda" = "Parda",
"Branca" = "Branca", "Amarela" = "Amarela",
"Indígena" = "Indígena"),
selected = "Preta"),
checkboxGroupInput("checkGroup_estudo", label = h5("Sexo"),
choices = list("Homem" = "Homem", "Mulher" = "Mulher"),
selected = c("Homem","Mulher"))
),
mainPanel(
h3(strong("população", textOutput(outputId = "estudo")), align = "center"),
h5("média de anos de estudo:", align = "center"),
h5(textOutput(outputId = "estat_estudo"), align = "center"),
h5(textOutput(outputId = "estat_estudo1"), align = "center"),
hr(),
textOutput(outputId = "aviso_estudo_map"),
plotOutput(outputId = "estudo_map"),
tableOutput(outputId = "estudo_tabela")
)
)
)
)
),
navbarMenu(
title = "Emprego",
tabPanel(
title = "Fora da Força de Trabalho",
sidebarLayout(
sidebarPanel(
radioButtons("radio_partic", label = h5("Raça"),
choices = list("Preta" = "Preta", "Parda" = "Parda",
"Branca" = "Branca", "Amarela" = "Amarela",
"Indígena" = "Indígena"),
selected = "Preta"),
checkboxGroupInput("checkGroup_partic", label = h5("Sexo"),
choices = list("Homem" = "Homem", "Mulher" = "Mulher"),
selected = c("Homem","Mulher"))
),
mainPanel(
h3(strong("população", textOutput(outputId = "partic")), align = "center"),
h5("Fora da força de trabalho:", align = "center"),
h5(textOutput(outputId = "estat_partic"), align = "center"),
h5(textOutput(outputId = "estat_partic1"), align = "center"),
hr(),
textOutput(outputId = "aviso_partic_map"),
plotOutput(outputId = "partic_map"),
tableOutput(outputId = "partic_tabela")
)
)
),
tabPanel(
title = "Taxa de Desemprego",
sidebarLayout(
sidebarPanel(
radioButtons("radio_desemp", label = h5("Raça"),
choices = list("Preta" = "Preta", "Parda" = "Parda",
"Branca" = "Branca", "Amarela" = "Amarela",
"Indígena" = "Indígena"),
selected = "Preta"),
checkboxGroupInput("checkGroup_desemp", label = h5("Sexo"),
choices = list("Homem" = "Homem", "Mulher" = "Mulher"),
selected = c("Homem","Mulher"))
),
mainPanel(
textOutput(outputId = "aviso_desemp"),
plotOutput(outputId = "desemprego")
)
)
),
tabPanel(
title = "Taxa de Informalidade",
sidebarLayout(
sidebarPanel(
radioButtons("radio_informal", label = h5("Raça"),
choices = list("Preta" = "Preta", "Parda" = "Parda",
"Branca" = "Branca", "Amarela" = "Amarela",
"Indígena" = "Indígena"),
selected = "Preta"),
checkboxGroupInput("checkGroup_informal", label = h5("Sexo"),
choices = list("Homem" = "Homem", "Mulher" = "Mulher"),
selected = c("Homem","Mulher")),
hr(),
h5(strong("Informais")," são os empregados sem carteira assinada, os empregadores e os trabalhadores
conta-própria sem registro de CNPJ e os trabalhadores familiares.")
),
mainPanel(
textOutput(outputId = "aviso_informal"),
plotOutput(outputId = "informal")
)
)
),
tabPanel(
title = "Taxa de Desalento",
sidebarLayout(
sidebarPanel(
radioButtons("radio_desal", label = h5("Raça"),
choices = list("Preta" = "Preta", "Parda" = "Parda",
"Branca" = "Branca", "Amarela" = "Amarela",
"Indígena" = "Indígena"),
selected = "Preta"),
checkboxGroupInput("checkGroup_desal", label = h5("Sexo"),
choices = list("Homem" = "Homem", "Mulher" = "Mulher"),
selected = c("Homem","Mulher"))
),
mainPanel(
textOutput(outputId = "aviso_desal"),
plotOutput(outputId = "desalento")
)
)
),
tabPanel(
title = "Rendimentos",
sidebarLayout(
sidebarPanel(
radioButtons("radio_rend", label = h5("Raça"),
choices = list("Preta" = "Preta", "Parda" = "Parda",
"Branca" = "Branca", "Amarela" = "Amarela",
"Indígena" = "Indígena"),
selected = "Preta"),
checkboxGroupInput("checkGroup_rend", label = h5("Sexo"),
choices = list("Homem" = "Homem", "Mulher" = "Mulher"),
selected = c("Homem","Mulher"))
),
mainPanel(
textOutput(outputId = "aviso_rend"),
plotOutput(outputId = "rendimentos")
)
)
)
)
)
dados$estado <- substr(dados$UPA,1,2)
dadospartic <- dados[dados$VD4001 == "Pessoas fora da força de trabalho" & !is.na(dados$VD4001),]
dadospartic <- tapply(dadospartic$one * dadospartic$V1032,list(dadospartic$estado,dadospartic$V2010,dadospartic$V2007),sum)
dadosPIA <- dados[!is.na(dados$VD4001),]
dadosPIA <- tapply(dadosPIA$one * dadosPIA$V1032,list(dadosPIA$estado,dadosPIA$V2010,dadosPIA$V2007),sum)
dadospartic <- ifelse(is.na(dadospartic), 0, dadospartic)
dadosPIA <- ifelse(is.na(dadosPIA), 0, dadosPIA)
if (2 == 2) {
dadospartic <- dadospartic[,,1] + dadospartic[,,2]
dadosPIA <- dadosPIA[,,1] + dadosPIA[,,2]
} else if (input$checkGroup_partic == "Homem") {
dadospartic <- dadospartic[,,1]
dadosPIA <- dadosPIA[,,1]
} else {
dadospartic <- dadospartic[,,2]
dadosPIA <- dadosPIA[,,2]
}
dadospartic <- dadospartic/dadosPIA
rm(dadosPIA)
dadospartic <- ifelse(is.na(dadospartic), 0, dadospartic)
dadospartic <- as.data.frame(round(dadospartic*100,2))
dadospartic$estado <- rownames(dadospartic)
dadospartic <- as.data.frame(dadospartic[,c(input$checkGroup_partic, "estado")])
View(dadospartic)
View(dadospartic)
View(dadospartic)
View(dadospartic)
dadospartic <- as.data.frame(dadospartic[,c("Preta", "estado")])
dadospartic <- merge(br,dadospartic,all.x = TRUE)
View(dadospartic)
runApp('PAINEL3.R')
